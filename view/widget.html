<!--<div ng-include="'components/navbar/navbar.html'"></div>-->
<p></p>






<!--<script src="/lib/jquery/jquery-2.1.4.min.js"></script>-->


<div class="container" id="widget" ng-controller="WidgetCtrl">

    <!--SCRIPT LOADING-->
<!--    <script src="../lib/angular/angular.js"></script>
    <script src="../lib/angular/angular-messages.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/controllers/WidgetCtrl.js"></script>
    <script src="../lib/jquery/jquery-2.1.4.min.js"></script>-->

  <div class="row">
    <div class="col-sm-3">
      <!--<div class=="container-fluid" ></div>-->
      <div class="sidebar-nav">
        <div class="navbar navbar-default" role="navigation">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle"
                    ng-click="isCollapsed = !isCollapsed">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <span class="visible-xs navbar-brand">Sidebar menu</span>
          </div>
          <div collapse="isCollapsed"
               class="navbar-collapse collapse sidebar-navbar-collapse">
            <ul class="nav navbar-nav">


              <!--GET DATA FROM PHP SERVER AND POST IT INTO MONGO DB-->
              <p></p>

              <div class="center-align">
                <a class="waves-effect waves-light btn" ng-click="addRealEstate()"><i
                  class="material-icons right">autorenew</i>{{totalRealEstates}}</a>
              </div>


              <!--DYNAMIC FILTERS SELECTORS-->

              <!--SEARCH_TYPE FILTER-->
              <!--<p><b>Searching type:</b></p>-->
              <p></p>





              <select id="tipo_de_anuncio-filter" class="form-control" ng-model="query.tipo_de_anuncio"
                      ng-options="item.tipo_de_anuncio as item.tipo_de_anuncio for item in awesomeRealEstates
                      | filter:{tipo_de_imovel:query.tipo_de_imovel || undefined}
                      | filter:{localizacao:query.localizacao || undefined}
                      | filter:{mediador:query.mediador || undefined}
                      | filter:priceRange || undefined
                      | filter:areaRange || undefined
                      | unique:'tipo_de_anuncio' || undefined "
                     >
                <option value>Choose the searching type</option>
                <option ng-repeat="item in awesomeRealEstates| filter:{tipo_de_anuncio:query} || undefined  "></option>

              </select>


              <!--TYPE FILTER-->
              <!--<p><b>Type:</b></p>-->
              <!--<p class="md-title"></p>-->
              <select id="tipo_de_imovel-filter" class="form-control" ng-model="query.tipo_de_imovel"
                      ng-options="item.tipo_de_imovel as item.tipo_de_imovel for item in awesomeRealEstates
                      | filter:{tipo_de_anuncio:query.tipo_de_anuncio || undefined}
                      | filter:{localizacao:query.localizacao || undefined}
                      | filter:{mediador:query.mediador || undefined}
                      | filter:priceRange
                      | filter:areaRange
                      | unique:'tipo_de_imovel' "
                      material-select watch>
                <option value>Choose the type</option>
                <option ng-repeat="item in awesomeRealEstates | filter:{tipo_de_imovel:query}"></option>
              </select>


              <!--ADDRESS FILTER-->
              <!--<p><b>Address:</b></p>-->
              <select id="localizacao-filter" class="form-control" ng-model="query.localizacao"
                      ng-options="item.localizacao as item.localizacao for item in awesomeRealEstates
                      | filter:{tipo_de_anuncio:query.tipo_de_anuncio || undefined}
                      | filter:{tipo_de_imovel:query.tipo_de_imovel || undefined}
                      | filter:{mediador:query.mediador || undefined}
                      | filter:priceRange
                      | filter:areaRange
                      | unique:'localizacao'"
                      material-select watch>
                <option value>Choose the address</option>
                <option ng-repeat="item in awesomeRealEstates | filter:{localizacao:query}"></option>
              </select>


              <!--BROKER FILTER-->
              <!--<p><b>Broker:</b></p>-->
              <select id="mediador-filter" class="form-control" ng-model="query.mediador"
                      ng-options="item.mediador as item.mediador for item in awesomeRealEstates
                      | filter:{tipo_de_anuncio:query.tipo_de_anuncio || undefined}
                      | filter:{tipo_de_imovel:query.tipo_de_imovel || undefined}
                      | filter:{localizacao:query.localizacao || undefined}
                      | filter:priceRange
                      | filter:areaRange
                      | unique:'mediador'"
                      material-select watch>
                <option value>Choose the broker</option>
                <option ng-repeat="item in awesomeRealEstates | filter:{mediador:query}"></option>
              </select>


              <!--CLEAR FILTERS-->

              <div class="center-align">
                <a class="waves-effect waves-light btn" ng-click="clearFilter()"><i
                  class="material-icons right">cached</i>Clear Filters</a>
                <p></p>
              </div>

              <br/>

              <!--SLIDER SURFACE-->
              <b>Area range:</b>
              <angular-ranger min="0" max="5000" step="10" min-value="lower_area_bound"
                              max-value="upper_area_bound"></angular-ranger>
              <div id="textbox">
                <p class="alignleft">Min: {{(lower_area_bound | number:0 ) + " m2"}} </p>

                <p class="alignright">Max: {{(upper_area_bound | number:0 ) + " m2"}}</p>
              </div>
              <div style="clear: both;"></div>


              <!--SLIDER PRICE-->
              <b>Price range:</b>
              <angular-ranger min="0" max="250000" step="1000" min-value="lower_price_bound"
                              max-value="upper_price_bound"></angular-ranger>

              <div id="textbox2">
                <p class="alignleft">Min: {{(lower_price_bound | number:0 ) + " €"}} </p>

                <p class="alignright">Max: {{(upper_price_bound | number:0) + " €"}}</p>
              </div>
              <div style="clear: both;"></div>

              <!--RESULTS-->
              <div class="center-align">
                <a class="waves-light btn-large"><i
                  class="material-icons right">done</i>{{filteredResults.length}} results</a>

                <p></p>
              </div>

            </ul>
          </div>
          <!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <!--table materialize-->
    <div class="row">
      <div class="col-sm-7">
        <div style="height:600px;overflow:auto;">
          <table class="responsive-table table-striped">
            <thead>
              <tr>
                <th data-field="tipo_de_anuncio">Search</th>
                <th data-field="tipo_de_imovel">Type</th>
                <th data-field="localizacao">Adress</th>
                <th data-field="mediador">Broker</th>
                <th data-field="area"><a class="blue-text text-darken-2" href=""
                                         ng-click='predicate="area"'>Surface(m2)</a></th>
                <th data-field="preco"><a class="blue-text text-darken-2" href=""
                                          ng-click='predicate="preco"'>Price(€)</a></th>
                <th data-field="fotos">Gallery</th>
              </tr>
            </thead>

            <tbody>
              <tr
                ng-repeat="item in filteredResults = (awesomeRealEstates | orderBy:predicate | unique:'tipo_de_anuncio' && 'tipo_de_imovel' && 'localização' && 'mediador' && 'area' &&'preco' | filter:query.tipo_de_anuncio  || undefined | filter:query.tipo_de_imovel  || undefined | filter:query.localizacao  || undefined| filter:query.mediador  || undefined | filter:priceRange | filter: areaRange)">
                <td>{{item.tipo_de_anuncio}}</td>
                <td>{{item.tipo_de_imovel}}</td>
                <td>{{item.localizacao}}</td>
                <td> {{item.mediador}}</td>
                <td> {{item.area}}</td>
                <td> {{item.preco}}</td>
                <td ng-repeat="fotos in item.fotos"><a class="blue-text text-darken-2" href={{fotos}} target="_blank">Photo</a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</div>


